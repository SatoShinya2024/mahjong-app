export default class {
  OK(): void {
    console.log('OK');
  }

  getAllTileObj() {
    const m1_000 = new Tile(0, '01_m1', 1, 'manzu');
    const m1_001 = new Tile(1, '01_m1', 1, 'manzu');
    const m1_002 = new Tile(2, '01_m1', 1, 'manzu');
    const m1_003 = new Tile(3, '01_m1', 1, 'manzu');
    const m2_004 = new Tile(4, '02_m2', 2, 'manzu');
    const m2_005 = new Tile(5, '02_m2', 2, 'manzu');
    const m2_006 = new Tile(6, '02_m2', 2, 'manzu');
    const m2_007 = new Tile(7, '02_m2', 2, 'manzu');
    const m3_008 = new Tile(8, '03_m3', 3, 'manzu');
    const m3_009 = new Tile(9, '03_m3', 3, 'manzu');
    const m3_010 = new Tile(10, '03_m3', 3, 'manzu');
    const m3_011 = new Tile(11, '03_m3', 3, 'manzu');
    const m4_012 = new Tile(12, '04_m4', 4, 'manzu');
    const m4_013 = new Tile(13, '04_m4', 4, 'manzu');
    const m4_014 = new Tile(14, '04_m4', 4, 'manzu');
    const m4_015 = new Tile(15, '04_m4', 4, 'manzu');
    const m5_016 = new Tile(16, '05_m5', 5, 'manzu');
    const m5_017 = new Tile(17, '05_m5', 5, 'manzu');
    const m5_018 = new Tile(18, '05_m5', 5, 'manzu');
    const m5_019 = new Tile(19, '05_m5', 5, 'manzu');
    const m5r_020 = new Tile(20, '06_m5r', 5, 'manzu');
    const m6_021 = new Tile(21, '07_m6', 6, 'manzu');
    const m6_022 = new Tile(22, '07_m6', 6, 'manzu');
    const m6_023 = new Tile(23, '07_m6', 6, 'manzu');
    const m6_024 = new Tile(24, '07_m6', 6, 'manzu');
    const m7_025 = new Tile(25, '08_m7', 7, 'manzu');
    const m7_026 = new Tile(26, '08_m7', 7, 'manzu');
    const m7_027 = new Tile(27, '08_m7', 7, 'manzu');
    const m7_028 = new Tile(28, '08_m7', 7, 'manzu');
    const m8_029 = new Tile(29, '09_m8', 8, 'manzu');
    const m8_030 = new Tile(30, '09_m8', 8, 'manzu');
    const m8_031 = new Tile(31, '09_m8', 8, 'manzu');
    const m8_032 = new Tile(32, '09_m8', 8, 'manzu');
    const m9_033 = new Tile(33, '10_m9', 9, 'manzu');
    const m9_034 = new Tile(34, '10_m9', 9, 'manzu');
    const m9_035 = new Tile(35, '10_m9', 9, 'manzu');
    const m9_036 = new Tile(36, '10_m9', 9, 'manzu');
    const p1_037 = new Tile(37, '11_p1', 1, 'pinzu');
    const p1_038 = new Tile(38, '11_p1', 1, 'pinzu');
    const p1_039 = new Tile(39, '11_p1', 1, 'pinzu');
    const p1_040 = new Tile(40, '11_p1', 1, 'pinzu');
    const p2_041 = new Tile(41, '12_p2', 2, 'pinzu');
    const p2_042 = new Tile(42, '12_p2', 2, 'pinzu');
    const p2_043 = new Tile(43, '12_p2', 2, 'pinzu');
    const p2_044 = new Tile(44, '12_p2', 2, 'pinzu');
    const p3_045 = new Tile(45, '13_p3', 3, 'pinzu');
    const p3_046 = new Tile(46, '13_p3', 3, 'pinzu');
    const p3_047 = new Tile(47, '13_p3', 3, 'pinzu');
    const p3_048 = new Tile(48, '13_p3', 3, 'pinzu');
    const p4_049 = new Tile(49, '14_p4', 4, 'pinzu');
    const p4_050 = new Tile(50, '14_p4', 4, 'pinzu');
    const p4_051 = new Tile(51, '14_p4', 4, 'pinzu');
    const p4_052 = new Tile(52, '14_p4', 4, 'pinzu');
    const p5_053 = new Tile(53, '15_p5', 5, 'pinzu');
    const p5_054 = new Tile(54, '15_p5', 5, 'pinzu');
    const p5_055 = new Tile(55, '15_p5', 5, 'pinzu');
    const p5_056 = new Tile(56, '15_p5', 5, 'pinzu');
    const p5r_057 = new Tile(57, '16_p5r', 5, 'pinzu');
    const p6_058 = new Tile(58, '17_p6', 6, 'pinzu');
    const p6_059 = new Tile(59, '17_p6', 6, 'pinzu');
    const p6_060 = new Tile(60, '17_p6', 6, 'pinzu');
    const p6_061 = new Tile(61, '17_p6', 6, 'pinzu');
    const p7_062 = new Tile(62, '18_p7', 7, 'pinzu');
    const p7_063 = new Tile(63, '18_p7', 7, 'pinzu');
    const p7_064 = new Tile(64, '18_p7', 7, 'pinzu');
    const p7_065 = new Tile(65, '18_p7', 7, 'pinzu');
    const p8_066 = new Tile(66, '19_p8', 8, 'pinzu');
    const p8_067 = new Tile(67, '19_p8', 8, 'pinzu');
    const p8_068 = new Tile(68, '19_p8', 8, 'pinzu');
    const p8_069 = new Tile(69, '19_p8', 8, 'pinzu');
    const p9_070 = new Tile(70, '20_p9', 9, 'pinzu');
    const p9_071 = new Tile(71, '20_p9', 9, 'pinzu');
    const p9_072 = new Tile(72, '20_p9', 9, 'pinzu');
    const p9_073 = new Tile(73, '20_p9', 9, 'pinzu');
    const s1_074 = new Tile(74, '21_s1', 1, 'souzu');
    const s1_075 = new Tile(75, '21_s1', 1, 'souzu');
    const s1_076 = new Tile(76, '21_s1', 1, 'souzu');
    const s1_077 = new Tile(77, '21_s1', 1, 'souzu');
    const s2_078 = new Tile(78, '22_s2', 2, 'souzu');
    const s2_079 = new Tile(79, '22_s2', 2, 'souzu');
    const s2_080 = new Tile(80, '22_s2', 2, 'souzu');
    const s2_081 = new Tile(81, '22_s2', 2, 'souzu');
    const s3_082 = new Tile(82, '23_s3', 3, 'souzu');
    const s3_083 = new Tile(83, '23_s3', 3, 'souzu');
    const s3_084 = new Tile(84, '23_s3', 3, 'souzu');
    const s3_085 = new Tile(85, '23_s3', 3, 'souzu');
    const s4_086 = new Tile(86, '24_s4', 4, 'souzu');
    const s4_087 = new Tile(87, '24_s4', 4, 'souzu');
    const s4_088 = new Tile(88, '24_s4', 4, 'souzu');
    const s4_089 = new Tile(89, '24_s4', 4, 'souzu');
    const s5_090 = new Tile(90, '25_s5', 5, 'souzu');
    const s5_091 = new Tile(91, '25_s5', 5, 'souzu');
    const s5_092 = new Tile(92, '25_s5', 5, 'souzu');
    const s5_093 = new Tile(93, '25_s5', 5, 'souzu');
    const s5r_094 = new Tile(94, '26_s5r', 5, 'souzu');
    const s6_095 = new Tile(95, '27_s6', 6, 'souzu');
    const s6_096 = new Tile(96, '27_s6', 6, 'souzu');
    const s6_097 = new Tile(97, '27_s6', 6, 'souzu');
    const s6_098 = new Tile(98, '27_s6', 6, 'souzu');
    const s7_099 = new Tile(99, '28_s7', 7, 'souzu');
    const s7_100 = new Tile(100, '28_s7', 7, 'souzu');
    const s7_101 = new Tile(101, '28_s7', 7, 'souzu');
    const s7_102 = new Tile(102, '28_s7', 7, 'souzu');
    const s8_103 = new Tile(103, '29_s8', 8, 'souzu');
    const s8_104 = new Tile(104, '29_s8', 8, 'souzu');
    const s8_105 = new Tile(105, '29_s8', 8, 'souzu');
    const s8_106 = new Tile(106, '29_s8', 8, 'souzu');
    const s9_107 = new Tile(107, '30_s9', 9, 'souzu');
    const s9_108 = new Tile(108, '30_s9', 9, 'souzu');
    const s9_109 = new Tile(109, '30_s9', 9, 'souzu');
    const s9_110 = new Tile(110, '30_s9', 9, 'souzu');
    const east_111 = new Tile(111, '31_east', 1, 'kaze');
    const east_112 = new Tile(112, '31_east', 1, 'kaze');
    const east_113 = new Tile(113, '31_east', 1, 'kaze');
    const east_114 = new Tile(114, '31_east', 1, 'kaze');
    const south_115 = new Tile(115, '32_south', 2, 'kaze');
    const south_116 = new Tile(116, '32_south', 2, 'kaze');
    const south_117 = new Tile(117, '32_south', 2, 'kaze');
    const south_118 = new Tile(118, '32_south', 2, 'kaze');
    const west_119 = new Tile(119, '33_west', 3, 'kaze');
    const west_120 = new Tile(120, '33_west', 3, 'kaze');
    const west_121 = new Tile(121, '33_west', 3, 'kaze');
    const west_122 = new Tile(122, '33_west', 3, 'kaze');
    const north_123 = new Tile(123, '34_north', 4, 'kaze');
    const north_124 = new Tile(124, '34_north', 4, 'kaze');
    const north_125 = new Tile(125, '34_north', 4, 'kaze');
    const north_126 = new Tile(126, '34_north', 4, 'kaze');
    const white_127 = new Tile(127, '35_white', 1, 'sangen');
    const white_128 = new Tile(128, '35_white', 1, 'sangen');
    const white_129 = new Tile(129, '35_white', 1, 'sangen');
    const white_130 = new Tile(130, '35_white', 1, 'sangen');
    const green_131 = new Tile(131, '36_green', 2, 'sangen');
    const green_132 = new Tile(132, '36_green', 2, 'sangen');
    const green_133 = new Tile(133, '36_green', 2, 'sangen');
    const green_134 = new Tile(134, '36_green', 2, 'sangen');
    const red_135 = new Tile(135, '37_red', 3, 'sangen');
    const red_136 = new Tile(136, '37_red', 3, 'sangen');
    const red_137 = new Tile(137, '37_red', 3, 'sangen');
    const red_138 = new Tile(138, '37_red', 3, 'sangen');

    return [
      m1_000,
      m1_001,
      m1_002,
      m1_003,
      m2_004,
      m2_005,
      m2_006,
      m2_007,
      m3_008,
      m3_009,
      m3_010,
      m3_011,
      m4_012,
      m4_013,
      m4_014,
      m4_015,
      m5_016,
      m5_017,
      m5_018,
      m5_019,
      m5r_020,
      m6_021,
      m6_022,
      m6_023,
      m6_024,
      m7_025,
      m7_026,
      m7_027,
      m7_028,
      m8_029,
      m8_030,
      m8_031,
      m8_032,
      m9_033,
      m9_034,
      m9_035,
      m9_036,
      p1_037,
      p1_038,
      p1_039,
      p1_040,
      p2_041,
      p2_042,
      p2_043,
      p2_044,
      p3_045,
      p3_046,
      p3_047,
      p3_048,
      p4_049,
      p4_050,
      p4_051,
      p4_052,
      p5_053,
      p5_054,
      p5_055,
      p5_056,
      p5r_057,
      p6_058,
      p6_059,
      p6_060,
      p6_061,
      p7_062,
      p7_063,
      p7_064,
      p7_065,
      p8_066,
      p8_067,
      p8_068,
      p8_069,
      p9_070,
      p9_071,
      p9_072,
      p9_073,
      s1_074,
      s1_075,
      s1_076,
      s1_077,
      s2_078,
      s2_079,
      s2_080,
      s2_081,
      s3_082,
      s3_083,
      s3_084,
      s3_085,
      s4_086,
      s4_087,
      s4_088,
      s4_089,
      s5_090,
      s5_091,
      s5_092,
      s5_093,
      s5r_094,
      s6_095,
      s6_096,
      s6_097,
      s6_098,
      s7_099,
      s7_100,
      s7_101,
      s7_102,
      s8_103,
      s8_104,
      s8_105,
      s8_106,
      s9_107,
      s9_108,
      s9_109,
      s9_110,
      east_111,
      east_112,
      east_113,
      east_114,
      south_115,
      south_116,
      south_117,
      south_118,
      west_119,
      west_120,
      west_121,
      west_122,
      north_123,
      north_124,
      north_125,
      north_126,
      white_127,
      white_128,
      white_129,
      white_130,
      green_131,
      green_132,
      green_133,
      green_134,
      red_135,
      red_136,
      red_137,
      red_138,
    ];
  }

  getSelectedTileObj(selectedTileNameArray: string[]) {
    const AllTile = this.getAllTileObj();
    const selectedTileObj: Tile[] = [];
    let count = 0;
    selectedTileNameArray.sort();
    for (const item of AllTile) {
      if (item.name === selectedTileNameArray[count]) {
        selectedTileObj.push(item);
        count++;
      }
    }
    return selectedTileObj;
  }

  getJantoKouho(selectedTileObj: Tile[]) {
    const result: Tile[] = [];
    let searchedTile: Tile = selectedTileObj[0];
    let count = 1;
    for (let i = 1; i < selectedTileObj.length; i++) {
      if (selectedTileObj[i].kind == searchedTile.kind && selectedTileObj[i].num == searchedTile.num && count == 1) {
        result.push(searchedTile);
        count++;
      } else if (selectedTileObj[i].kind != searchedTile.kind || selectedTileObj[i].num != searchedTile.num) {
        count = 1;
        searchedTile = selectedTileObj[i];
      }
    }
    return result;
  }

  makeJanto(tileArray: Tile[], jantoKouho: Tile) {
    const mentsuArray: Mentsu[] = [];
    const copy_tileArray: Tile[] = [];
    let count = 0;
    const num_line = jantoKouho.num * 10 + jantoKouho.num;
    const janto = new Janto(num_line, jantoKouho.kind, 'an');
    mentsuArray.push(janto);
    for (let i = 0; i < tileArray.length; i++) {
      if (tileArray[i].kind != jantoKouho.kind || tileArray[i].num != jantoKouho.num) {
        copy_tileArray.push(tileArray[i]);
      } else if (count == 2) {
        copy_tileArray.push(tileArray[i]);
      } else {
        count++;
      }
    }
    return {
      tileArray: copy_tileArray,
      mentsuArray: mentsuArray,
    };
  }

  makeAnko(tileArray: Tile[], mentsuArray: Mentsu[]) {
    let flg = true;
    const selectedTile = tileArray[0];
    for (let i = 1; i < 3; i++) {
      if (selectedTile.kind !== tileArray[i].kind || selectedTile.num !== tileArray[i].num) {
        flg = false;
      }
    }
    if (flg) {
      const copy_tileArray: Tile[] = [];
      const copy_mentsuArray: Mentsu[] = [];
      const num_line = selectedTile.num * 100 + selectedTile.num * 10 + selectedTile.num;
      const anko = new Koutsu(num_line, selectedTile.kind, 'an');
      for (let i = 3; i < tileArray.length; i++) {
        copy_tileArray.push(tileArray[i]);
      }
      for (const item of mentsuArray) {
        copy_mentsuArray.push(item);
      }
      copy_mentsuArray.push(anko);
      return {
        tileArray: copy_tileArray,
        mentsuArray: copy_mentsuArray,
      };
    } else {
      const copy_tileArray: Tile[] = [];
      const copy_mentsuArray: Mentsu[] = [];
      return {
        tileArray: copy_tileArray,
        mentsuArray: copy_mentsuArray,
      };
    }
  }

  makeAnshuntsu(tileArray: Tile[], mentsuArray: Mentsu[]) {
    const selectedKind = tileArray[0].kind;
    let selectedNum = tileArray[0].num;
    const selectedTile: Tile[] = [];
    selectedTile.push(tileArray[0]);
    let flg = true;
    const num_line = selectedNum * 100 + (selectedNum + 1) * 10 + selectedNum + 2;
    if (selectedKind === 'kaze' || selectedKind === 'sangen') {
      flg = false;
    }
    for (let i = 1; i < tileArray.length; i++) {
      if (selectedKind != tileArray[i].kind) {
        flg = false;
        break;
      } else if (tileArray[i].num == selectedNum + 1) {
        selectedNum++;
        selectedTile.push(tileArray[i]);
        if (selectedTile.length == 3) {
          break;
        }
      } else if (tileArray[i].num != selectedNum) {
        flg = false;
        break;
      }
    }
    if (selectedTile.length != 3) {
      flg = false;
    }
    if (flg) {
      const copy_tileArray: Tile[] = [];
      const copy_mentsuArray: Mentsu[] = [];
      const anshuntsu = new Shuntsu(num_line, selectedKind, 'an');
      for (let i = 0; i < tileArray.length; i++) {
        if (!selectedTile.includes(tileArray[i])) {
          copy_tileArray.push(tileArray[i]);
        }
      }
      for (let i = 0; i < mentsuArray.length; i++) {
        copy_mentsuArray.push(mentsuArray[i]);
      }
      copy_mentsuArray.push(anshuntsu);
      return {
        tileArray: copy_tileArray,
        mentsuArray: copy_mentsuArray,
      };
    } else {
      const copy_tileArray: Tile[] = [];
      const copy_mentsuArray: Mentsu[] = [];
      return {
        tileArray: copy_tileArray,
        mentsuArray: copy_mentsuArray,
      };
    }
  }

  makeCalledMentsu(calledTileArray: { num_line: number; kind: string; anmin: string }[]) {
    const result: Mentsu[] = [];
    for (const item of calledTileArray) {
      if (item.num_line > 1000) {
        result.push(new Kantsu(item.num_line, item.kind, item.anmin));
      } else if (item.num_line % 111 == 0) {
        result.push(new Koutsu(item.num_line, item.kind, item.anmin));
      } else {
        result.push(new Shuntsu(item.num_line, item.kind, item.anmin));
      }
    }
    return result;
  }

  makeAgariMentsuCombination(
    RonTileName: string,
    handTileObjArray: Tile[],
    calledTileArray: { num_line: number; kind: string; anmin: string }[],
  ) {
    const called_mentsu = this.makeCalledMentsu(calledTileArray);
    const result: { handTile: Tile[]; calledMentsu: Mentsu[] }[] = [];
    const ron_tile = { num: 0, kind: '' };

    if (RonTileName != '') {
      const AllTile = this.getAllTileObj();
      for (const item of AllTile) {
        if (item.name === RonTileName) {
          ron_tile.num = item.num;
          ron_tile.kind = item.kind;
        }
      }
    } else {
      result.push({ handTile: handTileObjArray, calledMentsu: called_mentsu });
      return result;
    }
    const same_tile_index: number[] = [];
    let shuntsu_minus2_index = -1;
    let shuntsu_mimus1_index = -1;
    let shuntsu_plus1_index = -1;
    let shuntsu_plus2_index = -1;
    for (const item of handTileObjArray) {
      if (ron_tile.kind == item.kind && ron_tile.num == item.num) {
        same_tile_index.push(handTileObjArray.indexOf(item));
      } else if (
        ron_tile.kind == item.kind &&
        ron_tile.num == item.num + 2 &&
        ron_tile.kind !== 'kaze' &&
        ron_tile.kind !== 'sangen'
      ) {
        shuntsu_minus2_index = handTileObjArray.indexOf(item);
      } else if (
        ron_tile.kind == item.kind &&
        ron_tile.num == item.num + 1 &&
        ron_tile.kind !== 'kaze' &&
        ron_tile.kind !== 'sangen'
      ) {
        shuntsu_mimus1_index = handTileObjArray.indexOf(item);
      } else if (
        ron_tile.kind == item.kind &&
        ron_tile.num == item.num - 1 &&
        ron_tile.kind !== 'kaze' &&
        ron_tile.kind !== 'sangen'
      ) {
        shuntsu_plus1_index = handTileObjArray.indexOf(item);
      } else if (
        ron_tile.kind == item.kind &&
        ron_tile.num == item.num - 2 &&
        ron_tile.kind !== 'kaze' &&
        ron_tile.kind !== 'sangen'
      ) {
        shuntsu_plus2_index = handTileObjArray.indexOf(item);
      }
    }
    if (same_tile_index.length > 2) {
      let copy_hand_tile: Tile[] = [];
      let copy_called_mentsu: Mentsu[] = [];
      let count = 0;
      for (let i = 0; i < handTileObjArray.length; i++) {
        if (count != 3 && same_tile_index.includes(i)) {
          count++;
        } else {
          copy_hand_tile.push(handTileObjArray[i]);
        }
      }
      for (const item of called_mentsu) {
        copy_called_mentsu.push(item);
      }
      const koutsu = new Koutsu(ron_tile.num * 100 + ron_tile.num * 10 + ron_tile.num, ron_tile.kind, 'min');
      copy_called_mentsu.push(koutsu);
      result.push({ handTile: copy_hand_tile, calledMentsu: copy_called_mentsu });

      copy_hand_tile = [];
      copy_called_mentsu = [];
      count = 0;
      for (let i = 0; i < handTileObjArray.length; i++) {
        if (count != 2 && same_tile_index.includes(i)) {
          count++;
        } else {
          copy_hand_tile.push(handTileObjArray[i]);
        }
      }
      for (const item of called_mentsu) {
        copy_called_mentsu.push(item);
      }
      const janto = new Janto(ron_tile.num * 10 + ron_tile.num, ron_tile.kind, 'min');
      copy_called_mentsu.push(janto);
      result.push({ handTile: copy_hand_tile, calledMentsu: copy_called_mentsu });
    } else if (same_tile_index.length == 2) {
      const copy_hand_tile = [];
      const copy_called_mentsu = [];
      let count = 0;
      for (let i = 0; i < handTileObjArray.length; i++) {
        if (count != 2 && same_tile_index.includes(i)) {
          count++;
        } else {
          copy_hand_tile.push(handTileObjArray[i]);
        }
      }
      for (const item of called_mentsu) {
        copy_called_mentsu.push(item);
      }
      const janto = new Janto(ron_tile.num * 10 + ron_tile.num, ron_tile.kind, 'min');
      copy_called_mentsu.push(janto);
      result.push({ handTile: copy_hand_tile, calledMentsu: copy_called_mentsu });
    }

    if (shuntsu_mimus1_index > -1 && shuntsu_minus2_index > -1 && same_tile_index.length > 0) {
      const copy_hand_tile: Tile[] = [];
      const copy_called_mentsu: Mentsu[] = [];
      for (let i = 0; i < handTileObjArray.length; i++) {
        if (i != shuntsu_mimus1_index && i != shuntsu_minus2_index && i != same_tile_index[0]) {
          copy_hand_tile.push(handTileObjArray[i]);
        }
      }
      for (const item of called_mentsu) {
        copy_called_mentsu.push(item);
      }
      const shuntsu = new Shuntsu(
        (ron_tile.num - 2) * 100 + (ron_tile.num - 1) * 10 + ron_tile.num,
        ron_tile.kind,
        'min',
      );
      copy_called_mentsu.push(shuntsu);
      result.push({ handTile: copy_hand_tile, calledMentsu: copy_called_mentsu });
    }

    if (shuntsu_mimus1_index > -1 && shuntsu_plus1_index > -1 && same_tile_index.length > 0) {
      const copy_hand_tile: Tile[] = [];
      const copy_called_mentsu: Mentsu[] = [];
      for (let i = 0; i < handTileObjArray.length; i++) {
        if (i != shuntsu_mimus1_index && i != shuntsu_plus1_index && i != same_tile_index[0]) {
          copy_hand_tile.push(handTileObjArray[i]);
        }
      }
      for (const item of called_mentsu) {
        copy_called_mentsu.push(item);
      }
      const shuntsu = new Shuntsu(
        (ron_tile.num - 1) * 100 + ron_tile.num * 10 + (ron_tile.num + 1),
        ron_tile.kind,
        'min',
      );
      copy_called_mentsu.push(shuntsu);
      result.push({ handTile: copy_hand_tile, calledMentsu: copy_called_mentsu });
    }

    if (shuntsu_plus1_index > -1 && shuntsu_plus2_index > -1 && same_tile_index.length > 0) {
      const copy_hand_tile: Tile[] = [];
      const copy_called_mentsu: Mentsu[] = [];
      for (let i = 0; i < handTileObjArray.length; i++) {
        if (i != shuntsu_plus1_index && i != shuntsu_plus2_index && i != same_tile_index[0]) {
          copy_hand_tile.push(handTileObjArray[i]);
        }
      }
      for (const item of called_mentsu) {
        copy_called_mentsu.push(item);
      }
      const shuntsu = new Shuntsu(
        (ron_tile.num + 2) * 100 + (ron_tile.num + 1) * 10 + ron_tile.num,
        ron_tile.kind,
        'min',
      );
      copy_called_mentsu.push(shuntsu);
      result.push({ handTile: copy_hand_tile, calledMentsu: copy_called_mentsu });
    }

    if (result.length == 0) {
      result.push({ handTile: handTileObjArray, calledMentsu: called_mentsu });
    }

    return result;
  }

  makeHandMentsuCombination(tileArray: Tile[], mentsuArray: Mentsu[], resultArray: Mentsu[][]) {
    if (tileArray.length != 0 && mentsuArray.length != 0) {
      const Obj01 = this.makeAnko(tileArray, mentsuArray);
      const Obj02 = this.makeAnshuntsu(tileArray, mentsuArray);
      this.makeHandMentsuCombination(Obj01.tileArray, Obj01.mentsuArray, resultArray);
      this.makeHandMentsuCombination(Obj02.tileArray, Obj02.mentsuArray, resultArray);
    } else if (tileArray.length == 0 && mentsuArray.length != 0) {
      resultArray.push(mentsuArray);
    }
  }

  getAllMentsuCombination(
    handTileNameArray: string[],
    calledTileArray: { num_line: number; kind: string; anmin: string }[],
    RonTileName: string,
  ) {
    const tileObjArray = this.getSelectedTileObj(handTileNameArray);
    const agarimentsu = this.makeAgariMentsuCombination(RonTileName, tileObjArray, calledTileArray);
    const result: Mentsu[][] = [];

    for (const item of agarimentsu) {
      const hand_tile = item.handTile;
      const called_mentsu = item.calledMentsu;
      let min_janto_hantei = false;
      const mentsu_array: Mentsu[][] = [];
      for (let i = 0; i < called_mentsu.length; i++) {
        if (called_mentsu[i].mentsuType == 0) {
          min_janto_hantei = true;
        }
      }
      if (min_janto_hantei) {
        this.makeHandMentsuCombination(hand_tile, [], mentsu_array);
        for (const array of mentsu_array) {
          for (let i = 0; i < called_mentsu.length; i++) {
            array.push(called_mentsu[i]);
          }
        }
      } else {
        const janto_kouho = this.getJantoKouho(hand_tile);
        for (const janto of janto_kouho) {
          const tileArray_and_MentsuArray = this.makeJanto(hand_tile, janto);
          this.makeHandMentsuCombination(
            tileArray_and_MentsuArray.tileArray,
            tileArray_and_MentsuArray.mentsuArray,
            mentsu_array,
          );
        }
        if (called_mentsu.length > 0) {
          for (const array of mentsu_array) {
            for (let i = 0; i < called_mentsu.length; i++) {
              array.push(called_mentsu[i]);
            }
          }
        }
      }
      for (const contents of mentsu_array) {
        result.push(contents);
      }
    }
    return result;
  }

  getChiToiTsuCombination(selectedTileNameArray: string[]) {
    const tileObjArray = this.getSelectedTileObj(selectedTileNameArray);
    let result: Mentsu[] = [];
    let tile = tileObjArray[0];
    const used_tile_info: { num: number; kind: string }[] = [];
    if (tileObjArray.length != 14) {
      return result;
    } else {
      for (let i = 1; i < tileObjArray.length; i = i + 2) {
        const tileNum_tileKind = { num: tile.num, kind: tile.kind };
        if (
          tile.num == tileObjArray[i].num &&
          tile.kind == tileObjArray[i].kind &&
          !used_tile_info.includes(tileNum_tileKind)
        ) {
          result.push(new Janto(tile.num * 10 + tile.num, tile.kind, 'an'));
          used_tile_info.push({ num: tile.num, kind: tile.kind });
          tile = tileObjArray[i + 1];
        } else {
          result = [];
          return result;
        }
      }
    }
    return result;
  }

  getKokuShiMuSoCombination(selectedTileNameArray: string[]) {
    const tileObjArray = this.getSelectedTileObj(selectedTileNameArray);
    let result: Mentsu[] = [];
    const needed_tile_name = [
      '01_m1',
      '10_m9',
      '11_p1',
      '20_p9',
      '21_s1',
      '30_s9',
      '31_east',
      '32_south',
      '33_west',
      '34_north',
      '35_white',
      '36_green',
      '37_red',
    ];
    const contained_tile_array = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
    if (tileObjArray.length != 14) {
      return result;
    } else {
      for (const item of tileObjArray) {
        if (needed_tile_name.includes(item.name)) {
          if (contained_tile_array[needed_tile_name.indexOf(item.name)] == 0) {
            contained_tile_array[needed_tile_name.indexOf(item.name)] = 1;
          } else if (contained_tile_array[13] == 0) {
            contained_tile_array[13] = 1;
            result.push(new Janto(item.num * 10 + item.num, item.kind, 'an'));
          } else {
            result = [];
            return result;
          }
        } else {
          result = [];
          return result;
        }
      }
    }
    return result;
  }

  getChuRenPoToCombination(selectedTileNameArray: string[]) {
    const tileObjArray = this.getSelectedTileObj(selectedTileNameArray);
    let result: Mentsu[] = [];
    const kind = tileObjArray[0].kind;
    const tile_num_array = [3, 1, 1, 1, 1, 1, 1, 1, 3, 1];
    if (tileObjArray.length != 14) {
      return result;
    } else {
      for (const item of tileObjArray) {
        if (item.kind !== kind) {
          result = [];
          return result;
        } else if (tile_num_array[item.num - 1] > 0) {
          tile_num_array[item.num - 1]--;
        } else if (tile_num_array[9] > 0) {
          tile_num_array[9]--;
          result.push(new Janto(item.num * 10 + item.num, kind, 'an'));
        } else {
          result = [];
          return result;
        }
      }
    }
    return result;
  }

  judgeTanyao(hand: Hand) {
    const mentsu = hand.mentsu;
    for (const item of mentsu) {
      if (item.kind === 'kaze' || item.kind === 'sangen') {
        return;
      } else if (
        item.num_line == 11 ||
        item.num_line == 99 ||
        item.num_line == 123 ||
        item.num_line == 789 ||
        item.num_line == 111 ||
        item.num_line == 999
      ) {
        return;
      }
    }
    hand.addRole(1);
    hand.addRoleName('タンヤオ');
  }

  judgeYakuhai(hand: Hand, kazeseki: string, bakaze: string) {
    const mentsu = hand.mentsu;
    for (const item of mentsu) {
      if (item.kind === 'sangen' && item.num_line == 111) {
        hand.addRole(1);
        hand.addRoleName('白');
      } else if (item.kind === 'sangen' && item.num_line == 222) {
        hand.addRole(1);
        hand.addRoleName('發');
      } else if (item.kind === 'sangen' && item.num_line == 333) {
        hand.addRole(1);
        hand.addRoleName('中');
      } else if (item.kind === 'kaze' && item.num_line == 111 && kazeseki === '東' && bakaze === '東') {
        hand.addRole(2);
        hand.addRoleName('ダブ東');
      } else if (item.kind === 'kaze' && item.num_line == 222 && kazeseki === '南' && bakaze === '南') {
        hand.addRole(2);
        hand.addRoleName('ダブ南');
      } else if (item.kind === 'kaze' && item.num_line == 111 && bakaze === '東') {
        hand.addRole(1);
        hand.addRoleName('場風　東');
      } else if (item.kind === 'kaze' && item.num_line == 222 && bakaze === '南') {
        hand.addRole(1);
        hand.addRoleName('場風　南');
      } else if (item.kind === 'kaze' && item.num_line == 111 && kazeseki === '東') {
        hand.addRole(1);
        hand.addRoleName('東');
      } else if (item.kind === 'kaze' && item.num_line == 222 && kazeseki === '南') {
        hand.addRole(1);
        hand.addRoleName('南');
      } else if (item.kind === 'kaze' && item.num_line == 333 && kazeseki === '西') {
        hand.addRole(1);
        hand.addRoleName('西');
      } else if (item.kind === 'kaze' && item.num_line == 444 && kazeseki === '北') {
        hand.addRole(1);
        hand.addRoleName('北');
      }
    }
  }

  judgePinfu(hand: Hand, kazeseki: string, bakaze: string) {
    if (hand.naki) {
      return;
    }
    for (const item of hand.mentsu) {
      if (item.mentsuType == 1 || item.mentsuType == 3) {
        return;
      }
      if (item.mentsuType == 0 && item.kind === 'sangen') {
        return;
      } else if (
        item.mentsuType == 0 &&
        (kazeseki === '東' || bakaze === '東') &&
        item.kind == 'kaze' &&
        item.num_line == 11
      ) {
        return;
      } else if (
        item.mentsuType == 0 &&
        (kazeseki === '南' || bakaze === '南') &&
        item.kind == 'kaze' &&
        item.num_line == 22
      ) {
        return;
      } else if (item.mentsuType == 0 && kazeseki === '西' && item.kind == 'kaze' && item.num_line == 33) {
        return;
      } else if (item.mentsuType == 0 && kazeseki === '北' && item.kind == 'kaze' && item.num_line == 44) {
        return;
      }
    }
    hand.addRole(1);
    hand.addRoleName('平和');
  }

  judgeIpeko(hand: Hand) {
    if (hand.naki) {
      return;
    }
    for (let i = 0; i < hand.mentsu.length - 1; i++) {
      const mentsu = hand.mentsu[i];
      if (mentsu.mentsuType == 2) {
        for (let j = i + 1; j < hand.mentsu.length; j++) {
          if (mentsu.kind === hand.mentsu[j].kind && mentsu.num_line == hand.mentsu[j].num_line) {
            hand.addRole(1);
            hand.addRoleName('一盃口');
            return;
          }
        }
      }
    }
  }

  judgeSanshokuDojun(hand: Hand) {
    let flg = false;
    const shuntsu_array: Mentsu[] = [];
    for (const item of hand.mentsu) {
      if (item.mentsuType == 2) {
        shuntsu_array.push(item);
      }
    }
    if (shuntsu_array.length > 2) {
      shuntsu_array.sort((a, b) => {
        return a.num_line - b.num_line;
      });
      for (let i = 0; i < shuntsu_array.length - 2; i++) {
        if (flg) {
          break;
        }
        const shuntsu = shuntsu_array[i];
        const kind_array = [shuntsu.kind];
        for (let j = i + 1; j < shuntsu_array.length; j++) {
          if (shuntsu.num_line == shuntsu_array[j].num_line && !kind_array.includes(shuntsu_array[j].kind)) {
            kind_array.push(shuntsu_array[j].kind);
          }
          if (kind_array.includes('manzu') && kind_array.includes('pinzu') && kind_array.includes('souzu')) {
            flg = true;
            break;
          }
        }
      }
    }
    if (flg && !hand.naki) {
      hand.addRole(2);
      hand.addRoleName('三色同順');
    } else if (flg && hand.naki) {
      hand.addRole(1);
      hand.addRoleName('三色同順');
    }
  }

  judgeSanshokuDoko(hand: Hand) {
    const koutsu_array: Mentsu[] = [];
    const koutsu_num_array: number[] = [];
    let flg = false;
    for (const item of hand.mentsu) {
      if ((item.mentsuType == 1 || item.mentsuType == 3) && item.kind !== 'kaze' && item.kind !== 'sangen') {
        koutsu_array.push(item);
        if (item.num_line > 1000) {
          koutsu_num_array.push(Math.floor(item.num_line / 10) / 111);
        } else {
          koutsu_num_array.push(item.num_line / 111);
        }
      }
    }
    if (koutsu_array.length > 2) {
      for (let i = 0; i < koutsu_array.length - 2; i++) {
        if (flg) {
          break;
        }
        const koutsu = koutsu_array[i];
        const kind_array = [koutsu.kind];
        for (let j = i + 1; j < koutsu_array.length; j++) {
          if (koutsu_num_array[i] == koutsu_num_array[j] && !kind_array.includes(koutsu_array[j].kind)) {
            kind_array.push(koutsu_array[j].kind);
          }
          if (kind_array.includes('manzu') && kind_array.includes('pinzu') && kind_array.includes('souzu')) {
            flg = true;
            break;
          }
        }
      }
    }
    if (flg) {
      hand.addRole(2);
      hand.addRoleName('三色同刻');
    }
  }

  judgeSanAnko(hand: Hand) {
    const mentsu = hand.mentsu;
    let count = 0;
    for (const item of mentsu) {
      if ((item.mentsuType == 1 || item.mentsuType == 3) && item.anmin) {
        count++;
      }
    }
    if (count == 3) {
      hand.addRole(2);
      hand.addRoleName('三暗刻');
    }
  }

  judgeIkkiTsukan(hand: Hand) {
    const shuntsu_array: Mentsu[] = [];
    let flg = false;
    for (const item of hand.mentsu) {
      if (item.mentsuType == 2) {
        shuntsu_array.push(item);
      }
    }
    if (shuntsu_array.length > 2) {
      for (let i = 0; i < shuntsu_array.length - 2; i++) {
        if (flg) {
          break;
        }
        const kind = shuntsu_array[i].kind;
        const shuntsu_num_array = [0, 0, 0];
        for (let j = i; j < shuntsu_array.length; j++) {
          if (shuntsu_array[j].kind == kind) {
            switch (shuntsu_array[j].num_line) {
              case 123:
                if (shuntsu_num_array[0] == 0) {
                  shuntsu_num_array[0] = 1;
                }
                break;
              case 456:
                if (shuntsu_num_array[1] == 0) {
                  shuntsu_num_array[1] = 1;
                }
                break;
              case 789:
                if (shuntsu_num_array[2] == 0) {
                  shuntsu_num_array[2] = 1;
                }
                break;
            }
          }
          if (!shuntsu_num_array.includes(0)) {
            flg = true;
            break;
          }
        }
      }
    }
    if (flg && !hand.naki) {
      hand.addRole(2);
      hand.addRoleName('一気通貫');
    } else if (flg && hand.naki) {
      hand.addRole(1);
      hand.addRoleName('一気通貫');
    }
  }

  judgeToiToiHo(hand: Hand) {
    let count = 0;
    for (const item of hand.mentsu) {
      if (item.mentsuType == 1 || item.mentsuType == 3) {
        count++;
      }
    }
    if (count == 4) {
      hand.addRole(2);
      hand.addRoleName('対々和');
    }
  }

  judgeChanta(hand: Hand) {
    const mentsu_numline_array = [123, 789, 111, 999, 1111, 9999];
    let suuhai_flg = true;
    let jihai_flg = false;
    for (const item of hand.mentsu) {
      if (item.kind !== 'kaze' && item.kind !== 'sangen' && !mentsu_numline_array.includes(item.num_line)) {
        suuhai_flg = false;
      }
      if (item.kind === 'kaze' || item.kind === 'sangen') {
        jihai_flg = true;
      }
    }
    if (suuhai_flg && jihai_flg && !hand.naki) {
      hand.addRole(2);
      hand.addRoleName('混全帯幺九');
    } else if (suuhai_flg && jihai_flg && hand.naki) {
      hand.addRole(1);
      hand.addRoleName('混全帯幺九');
    }
  }

  judgeSanKantsu(hand: Hand) {
    let count = 0;
    for (const item of hand.mentsu) {
      if (item.mentsuType == 3) {
        count++;
      }
    }
    if (count == 3) {
      hand.addRole(2);
      hand.addRoleName('三槓子');
    }
  }

  judgeShouSangen(hand: Hand) {
    let flg = false;
    let count = 0;
    for (const item of hand.mentsu) {
      if (item.kind === 'sangen' && item.mentsuType == 0) {
        flg = true;
      } else if (item.kind === 'sangen' && (item.mentsuType == 1 || item.mentsuType == 3)) {
        count++;
      }
    }
    if (flg && count == 2) {
      hand.addRole(2);
      hand.addRoleName('小三元');
    }
  }

  judgeHonRouTou(hand: Hand) {
    let suuhai_flg = true;
    let jihai_flg = false;
    const mentsu_numline_array = [111, 999, 1111, 9999, 11, 99];
    for (const item of hand.mentsu) {
      if (item.mentsuType == 2) {
        suuhai_flg = false;
      } else if (item.kind != 'sangen' && item.kind != 'kaze' && !mentsu_numline_array.includes(item.num_line)) {
        suuhai_flg = false;
      }
      if (item.kind === 'kaze' || item.kind === 'sangen') {
        jihai_flg = true;
      }
    }
    if (suuhai_flg && jihai_flg) {
      hand.addRole(2);
      hand.addRoleName('混老頭');
    }
  }

  judgeRyanPeKo(hand: Hand) {
    let flg = true;
    if (hand.naki) {
      flg = false;
    }
    if (flg) {
      const manzu_array: Mentsu[] = [];
      const pinzu_array: Mentsu[] = [];
      const souzu_array: Mentsu[] = [];
      for (const item of hand.mentsu) {
        if (item.mentsuType == 2 && item.kind === 'manzu') {
          manzu_array.push(item);
        } else if (item.mentsuType == 2 && item.kind === 'pinzu') {
          pinzu_array.push(item);
        } else if (item.mentsuType == 2 && item.kind === 'souzu') {
          souzu_array.push(item);
        }
      }
      if (manzu_array.length == 2 && pinzu_array.length == 2) {
        if (manzu_array[0].num_line != manzu_array[1].num_line || pinzu_array[0].num_line != pinzu_array[1].num_line) {
          flg = false;
        }
      } else if (manzu_array.length == 2 && souzu_array.length == 2) {
        if (manzu_array[0].num_line != manzu_array[1].num_line || souzu_array[0].num_line != souzu_array[1].num_line) {
          flg = false;
        }
      } else if (pinzu_array.length == 2 && souzu_array.length == 2) {
        if (pinzu_array[0].num_line != pinzu_array[1].num_line || souzu_array[0].num_line != souzu_array[1].num_line) {
          flg = false;
        }
      } else {
        flg = false;
      }
    }
    if (flg) {
      hand.addRole(3);
      hand.addRoleName('二盃口');
    }
  }

  judgeJunChan(hand: Hand) {
    let suuhai_flg = true;
    let jihai_flg = true;
    const mentsu_numline_array = [11, 99, 123, 789, 111, 999, 1111, 9999];
    for (const item of hand.mentsu) {
      if (item.kind !== 'kaze' && item.kind !== 'sangen' && !mentsu_numline_array.includes(item.num_line)) {
        suuhai_flg = false;
      }
      if (item.kind === 'kaze' || item.kind === 'sangen') {
        jihai_flg = false;
      }
    }
    if (suuhai_flg && jihai_flg && !hand.naki) {
      hand.addRole(3);
      hand.addRoleName('純全帯公九');
    } else if (suuhai_flg && jihai_flg && hand.naki) {
      hand.addRole(2);
      hand.addRoleName('純全帯公九');
    }
  }

  judgeHonItsu(hand: Hand) {
    let suuhai_flg = true;
    const suuhai_array: Mentsu[] = [];
    let jihai_flg = true;
    const jihai_array: Mentsu[] = [];
    for (const item of hand.mentsu) {
      if (item.kind !== 'kaze' && item.kind !== 'sangen') {
        suuhai_array.push(item);
      } else {
        jihai_array.push(item);
      }
    }
    const kind = suuhai_array[0].kind;
    for (const item of suuhai_array) {
      if (kind !== item.kind) {
        suuhai_flg = false;
      }
    }
    if (jihai_array.length == 0) {
      jihai_flg = false;
    }
    if (suuhai_flg && jihai_flg && !hand.naki) {
      hand.addRole(3);
      hand.addRoleName('混一色');
    } else if (suuhai_flg && jihai_flg && hand.naki) {
      hand.addRole(2);
      hand.addRoleName('混一色');
    }
  }

  judgeChinItsu(hand: Hand) {
    let flg = true;
    for (const item of hand.mentsu) {
      if (item.kind === 'kaze' || item.kind === 'sangen') {
        flg = false;
      }
    }
    if (flg) {
      const kind = hand.mentsu[0].kind;
      for (const item of hand.mentsu) {
        if (kind !== item.kind) {
          flg = false;
        }
      }
    }
    if (flg && !hand.naki) {
      hand.addRole(6);
      hand.addRoleName('清一色');
    } else if (flg && hand.naki) {
      hand.addRole(5);
      hand.addRoleName('清一色');
    }
  }

  judgeSuAnKo(hand: Hand) {
    if (hand.naki) {
      return;
    }
    let count = 0;
    for (const item of hand.mentsu) {
      if ((item.mentsuType == 1 || item.mentsuType == 3) && item.anmin === 'an') {
        count++;
      }
    }
    if (count == 4) {
      hand.addRole(13);
      hand.addRoleName('四暗刻');
    }
  }

  judgeDaiSanGen(hand: Hand) {
    let count = 0;
    for (const item of hand.mentsu) {
      if ((item.mentsuType == 1 || item.mentsuType == 3) && item.kind == 'sangen') {
        count++;
      }
    }
    if (count == 3) {
      hand.addRole(13);
      hand.addRoleName('大三元');
    }
  }

  judgeRyuISo(hand: Hand) {
    const num_line_array = [22, 33, 44, 66, 88, 234, 222, 333, 444, 666, 888];
    let count = 0;
    for (const item of hand.mentsu) {
      if (item.kind === 'souzu' && num_line_array.includes(item.num_line)) {
        count++;
      } else if (item.kind === 'sangen' && item.num_line % 2 == 0) {
        count++;
      }
    }
    if (count == 5) {
      hand.addRole(13);
      hand.addRoleName('緑一色');
    }
  }

  judgeTsuISo(hand: Hand) {
    let count = 0;
    for (const item of hand.mentsu) {
      if (item.kind === 'kaze' || item.kind === 'sangen') {
        count++;
      }
    }
    if (count == 5 || count == 7) {
      hand.addRole(13);
      hand.addRoleName('字一色');
    }
  }

  judgeChinRoTo(hand: Hand) {
    const num_line_array = [11, 99, 111, 999, 1111, 9999];
    for (const item of hand.mentsu) {
      if (item.kind === 'kaze' || item.kind === 'sangen') {
        return;
      } else if (!num_line_array.includes(item.num_line)) {
        return;
      }
    }
    hand.addRole(13);
    hand.addRoleName('清老頭');
  }

  judgeSuKanTsu(hand: Hand) {
    let count = 0;
    for (const item of hand.mentsu) {
      if (item.mentsuType == 3) {
        count++;
      }
    }
    if (count == 4) {
      hand.addRole(13);
      hand.addRoleName('四槓子');
    }
  }

  judgeShoSuShi(hand: Hand) {
    let count = 0;
    for (const item of hand.mentsu) {
      if (item.mentsuType == 0 && item.kind != 'kaze') {
        return;
      } else if (item.kind == 'kaze') {
        count++;
      }
    }
    if (count == 4) {
      hand.addRole(13);
      hand.addRoleName('小四喜');
    }
  }

  judgeDaiSuShi(hand: Hand) {
    let count = 0;
    for (const item of hand.mentsu) {
      if ((item.mentsuType == 1 || item.mentsuType == 3) && item.kind === 'kaze') {
        count++;
      }
    }
    if (count == 4) {
      hand.addRole(13);
      hand.addRoleName('大四喜');
    }
  }

  getMostStrongHand(
    handTileNameArray: string[],
    calledTileArray: { num_line: number; kind: string; anmin: string }[],
    RonTileName: string,
    naki: boolean,
    bakaze: string,
    jikaze: string,
  ) {
    const yakunashi = new Hand([], naki);
    const hand_array: Hand[] = [yakunashi];
    if (this.getKokuShiMuSoCombination(handTileNameArray).length > 0) {
      const hand = new Hand(this.getKokuShiMuSoCombination(handTileNameArray), true);
      hand.addRole(13);
      hand.addRoleName('国士無双');
      return hand;
    } else if (this.getChuRenPoToCombination(handTileNameArray).length > 0) {
      const hand = new Hand(this.getChuRenPoToCombination(handTileNameArray), true);
      hand.addRole(13);
      hand.addRoleName('九蓮宝燈');
      return hand;
    } else if (this.getChiToiTsuCombination(handTileNameArray).length > 0) {
      const hand = new Hand(this.getChiToiTsuCombination(handTileNameArray), true);
      this.judgeTsuISo(hand);
      if (hand.role == 13) {
        return hand;
      } else {
        hand.addRole(2);
        hand.addRoleName('七対子');
        this.judgeChinItsu(hand);
        this.judgeHonItsu(hand);
        this.judgeHonRouTou(hand);
        this.judgeTanyao(hand);
        hand_array.push(hand);
      }
    }

    const mentsu_combination = this.getAllMentsuCombination(handTileNameArray, calledTileArray, RonTileName);

    if (mentsu_combination.length > 0) {
      for (const item of mentsu_combination) {
        hand_array.push(this.getMentsuRole(item, naki, bakaze, jikaze));
      }
    }

    hand_array.sort((a, b) => b.role - a.role);

    return hand_array[0];
  }

  getMentsuRole(mentsuCombination: Mentsu[], naki: boolean, bakaze: string, jikaze: string) {
    const hand = new Hand(mentsuCombination, naki);
    this.judgeSuAnKo(hand);
    this.judgeDaiSanGen(hand);
    this.judgeRyuISo(hand);
    this.judgeTsuISo(hand);
    this.judgeChinRoTo(hand);
    this.judgeSuKanTsu(hand);
    this.judgeShoSuShi(hand);
    this.judgeDaiSuShi(hand);

    if (hand.role < 13) {
      this.judgeYakuhai(hand, jikaze, bakaze);
      this.judgeTanyao(hand);
      this.judgePinfu(hand, jikaze, bakaze);
      this.judgeIpeko(hand);
      this.judgeSanshokuDojun(hand);
      this.judgeSanshokuDoko(hand);
      this.judgeSanAnko(hand);
      this.judgeIkkiTsukan(hand);
      this.judgeToiToiHo(hand);
      this.judgeChanta(hand);
      this.judgeSanKantsu(hand);
      this.judgeShouSangen(hand);
      this.judgeHonRouTou(hand);
      this.judgeRyanPeKo(hand);
      this.judgeJunChan(hand);
      this.judgeHonItsu(hand);
      this.judgeChinItsu(hand);
    }
    return hand;
  }
}

class Tile {
  id: number;
  name: string;
  num: number;
  kind: string;

  constructor(id: number, name: string, num: number, kind: string) {
    this.id = id;
    this.name = name;
    this.num = num;
    this.kind = kind;
  }
}

class Mentsu {
  num_line: number;
  kind: string;
  mentsuType: number;
  anmin: string;

  constructor(num_line: number, kind: string, mentsuType: number, anmin: string) {
    this.num_line = num_line;
    this.kind = kind;
    this.mentsuType = mentsuType;
    this.anmin = anmin;
  }
}

class Janto extends Mentsu {
  constructor(num_line: number, kind: string, anmin: string) {
    super(num_line, kind, 0, anmin);
  }
}

class Koutsu extends Mentsu {
  constructor(num_line: number, kind: string, anmin: string) {
    super(num_line, kind, 1, anmin);
  }
}

class Shuntsu extends Mentsu {
  constructor(num_line: number, kind: string, anmin: string) {
    super(num_line, kind, 2, anmin);
  }
}

class Kantsu extends Mentsu {
  constructor(num_line: number, kind: string, anmin: string) {
    super(num_line, kind, 3, anmin);
  }
}

class Hand {
  mentsu: Mentsu[];
  role: number;
  roleName: string[];
  naki: boolean;
  constructor(mentsu: Mentsu[], naki: boolean) {
    this.mentsu = mentsu;
    this.role = 0;
    this.roleName = [];
    this.naki = naki;
  }
  addRole(num: number) {
    this.role += num;
  }
  addRoleName(name: string) {
    this.roleName.push(name);
  }
}
